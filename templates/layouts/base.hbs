<!doctype html>
<html lang="en" data-bs-theme="dark">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link
			rel="stylesheet"
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
		/>
		<link rel="stylesheet" href="/static/css/app.css" />
		<script src="https://unpkg.com/htmx.org@1.9.12"></script>
		<title>GoMarket</title>
	</head>
	<body class="min-vh-100 d-flex flex-column">
		{{> navbar}}

		<main
			id="app"
			class="flex-grow-1 d-flex p-0"
			{{#if initial_path}}hx-get="{{initial_path}}" hx-trigger="load" hx-swap="innerHTML"{{/if}}
		>
			{{{body}}}
		</main>

		{{#if open_funds_modal}}
		<div
			hx-get="/funds/modal"
			hx-trigger="load"
			hx-target="#fundsModalContent"
			hx-swap="innerHTML"
		></div>
		{{/if}}

		<div
			class="modal fade"
			id="staticBackdrop"
			data-bs-backdrop="static"
			data-bs-keyboard="false"
			tabindex="-1"
			aria-labelledby="staticBackdropLabel"
			aria-hidden="true"
		>
			<div
				id="fundsModalContent"
				class="modal-dialog modal-dialog-centered"
				hx-on::after-swap="bootstrap.Modal.getOrCreateInstance(document.getElementById('staticBackdrop')).show()"
			></div>
		</div>

		{{> footer}}

		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
			crossorigin="anonymous"
		></script>
		<script defer src="/static/js/app.js"></script>
		<script
			defer
			src="https://unpkg.com/lightweight-charts@4.2.3/dist/lightweight-charts.standalone.production.js"
		></script>
		<script defer src="/static/js/chartData.js"></script>
		<script defer src="/static/js/homeWidgets.js"></script>
		<script defer src="/static/js/alertsRealtime.js"></script>
		{{#if is_logged_in}}
  <script defer src="/static/js/sseEvents.js"></script>
  <script defer src="/static/js/portfolioRealtime.js"></script>
{{/if}}

	</body>
</html>
